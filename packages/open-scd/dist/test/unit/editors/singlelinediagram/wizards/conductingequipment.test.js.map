{"version":3,"file":"conductingequipment.test.js","sourceRoot":"","sources":["../../../../../../test/unit/editors/singlelinediagram/wizards/conductingequipment.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { expect, fixture, html } from '@open-wc/testing';\n\nimport '../../../../../src/addons/Wizards.js';\nimport { Wizards } from '../../../../../src/addons/Wizards.js';\n\nimport {\n  executeWizardReplaceAction,\n  expectWizardNoUpdateAction,\n  fetchDoc,\n  setWizardTextFieldValue,\n} from '../../../wizards/test-support.js';\n\nimport { WizardTextField } from '../../../../../src/wizard-textfield.js';\nimport { WizardInputElement } from '../../../../../src/foundation.js';\nimport { editConductingEquipmentWizard } from '../../../../../src/editors/singlelinediagram/wizards/conductingequipment.js';\nimport { updateNamingAndCoordinatesAction } from '../../../../../src/editors/singlelinediagram/wizards/foundation.js';\n\ndescribe('Wizards for SCL element Conducting Equipment (X/Y)', () => {\n  let doc: XMLDocument;\n  let conductingEquipment: Element;\n  let element: Wizards;\n  let inputs: WizardInputElement[];\n\n  beforeEach(async () => {\n    doc = await fetchDoc('/test/testfiles/valid2007B4withSubstationXY.scd');\n    conductingEquipment = doc.querySelector('ConductingEquipment[name=\"QB1\"]')!;\n\n    element = await fixture(\n      html`<oscd-wizards .host=${document}></oscd-wizards>`\n    );\n    const wizard = editConductingEquipmentWizard(conductingEquipment);\n    element.workflow.push(() => wizard);\n    await element.requestUpdate();\n    inputs = Array.from(element.wizardUI.inputs);\n  });\n\n  it('update name should be updated in document', async function () {\n    await setWizardTextFieldValue(<WizardTextField>inputs[1], 'OtherQB1');\n\n    const updateAction = executeWizardReplaceAction(\n      updateNamingAndCoordinatesAction(conductingEquipment),\n      element.wizardUI,\n      inputs\n    );\n    expect(updateAction.old.element).to.have.attribute('name', 'QB1');\n    expect(updateAction.new.element).to.have.attribute('name', 'OtherQB1');\n  });\n\n  it('update description should be updated in document', async function () {\n    await setWizardTextFieldValue(\n      <WizardTextField>inputs[2],\n      'Some description'\n    );\n\n    const updateAction = executeWizardReplaceAction(\n      updateNamingAndCoordinatesAction(conductingEquipment),\n      element.wizardUI,\n      inputs\n    );\n    expect(updateAction.old.element).to.not.have.attribute('desc');\n    expect(updateAction.new.element).to.have.attribute(\n      'desc',\n      'Some description'\n    );\n  });\n\n  it('update X-Coordinate should be updated in document', async function () {\n    await setWizardTextFieldValue(<WizardTextField>inputs[3], '4');\n\n    const updateAction = executeWizardReplaceAction(\n      updateNamingAndCoordinatesAction(conductingEquipment),\n      element.wizardUI,\n      inputs\n    );\n    expect(updateAction.old.element).to.have.attribute('sxy:x', '1');\n    expect(updateAction.new.element).to.have.attribute('sxy:x', '4');\n  });\n\n  it('update Y-Coordinate should be updated in document', async function () {\n    await setWizardTextFieldValue(<WizardTextField>inputs[4], '5');\n\n    const updateAction = executeWizardReplaceAction(\n      updateNamingAndCoordinatesAction(conductingEquipment),\n      element.wizardUI,\n      inputs\n    );\n    expect(updateAction.old.element).to.have.attribute('sxy:y', '1');\n    expect(updateAction.new.element).to.have.attribute('sxy:y', '5');\n  });\n\n  it('clear Y-Coordinate should be updated in document', async function () {\n    await setWizardTextFieldValue(<WizardTextField>inputs[4], null);\n\n    const updateAction = executeWizardReplaceAction(\n      updateNamingAndCoordinatesAction(conductingEquipment),\n      element.wizardUI,\n      inputs\n    );\n    expect(updateAction.old.element).to.have.attribute('sxy:y', '1');\n    expect(updateAction.new.element).to.not.have.attribute('sxy:y');\n  });\n\n  it('when no fields changed there will be no update action', async function () {\n    expectWizardNoUpdateAction(\n      updateNamingAndCoordinatesAction(conductingEquipment),\n      element.wizardUI,\n      inputs\n    );\n  });\n\n  it('looks like the latest snapshot', async () => {\n    await expect(element.wizardUI.dialog).dom.to.equalSnapshot();\n  });\n});\n"]}