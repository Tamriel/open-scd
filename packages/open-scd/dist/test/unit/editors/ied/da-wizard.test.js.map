{"version":3,"file":"da-wizard.test.js","sourceRoot":"","sources":["../../../../../test/unit/editors/ied/da-wizard.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { expect, fixture, html } from '@open-wc/testing';\n\nimport '../../../../src/addons/Wizards.js';\nimport { Wizards } from '../../../../src/addons/Wizards.js';\n\nimport { initializeNsdoc } from '../../../../src/foundation/nsdoc.js';\nimport { createDaInfoWizard } from '../../../../src/editors/ied/da-wizard.js';\nimport { getAncestorsFromDA } from './test-support.js';\n\ndescribe('da-wizard', async () => {\n  let element: Wizards;\n  let validSCL: XMLDocument;\n\n  const nsdoc = await initializeNsdoc();\n\n  beforeEach(async () => {\n    validSCL = await fetch('/test/testfiles/editors/iedEditorWithIEDs.scd')\n      .then(response => response.text())\n      .then(str => new DOMParser().parseFromString(str, 'application/xml'));\n  });\n\n  describe('with no ancestors', () => {\n    beforeEach(async () => {\n      const daElement = validSCL.querySelector(\n        'DataTypeTemplates > DOType[id=\"Dummy.XCBR1.Pos\"] > DA[name=\"ctlModel\"]'\n      )!;\n      const ancestors: Element[] = [];\n\n      element = await fixture(\n        html`<oscd-wizards .host=${document}></oscd-wizards>`\n      );\n      const wizard = createDaInfoWizard(daElement, undefined, ancestors, nsdoc);\n      element.workflow.push(() => wizard);\n      await element.requestUpdate();\n    });\n\n    it('looks like the latest snapshot', async () => {\n      await expect(element.wizardUI.dialog).dom.to.equalSnapshot();\n    });\n  });\n\n  describe('with a DA element', () => {\n    beforeEach(async () => {\n      const daElement = validSCL.querySelector(\n        'DataTypeTemplates > DOType[id=\"Dummy.XCBR1.Pos\"] > DA[name=\"ctlModel\"]'\n      )!;\n      const ancestors = getAncestorsFromDA(daElement, 'Dummy.XCBR1.Pos');\n\n      element = await fixture(\n        html`<oscd-wizards .host=${document}></oscd-wizards>`\n      );\n      const wizard = createDaInfoWizard(daElement, undefined, ancestors, nsdoc);\n      element.workflow.push(() => wizard);\n      await element.requestUpdate();\n    });\n\n    it('looks like the latest snapshot', async () => {\n      await expect(element.wizardUI.dialog).dom.to.equalSnapshot();\n    });\n  });\n\n  describe('with a BDA element', () => {\n    beforeEach(async () => {\n      const bdaElement = validSCL.querySelector(\n        'DataTypeTemplates > DAType[id=\"Dummy.LPHD1.Sim.SBOw\"] > BDA[name=\"ctlVal\"]'\n      )!;\n      const daElement = validSCL.querySelector(\n        'DataTypeTemplates > DOType[id=\"Dummy.LPHD1.Sim\"] > DA[name=\"SBOw\"]'\n      )!;\n      const ancestors = getAncestorsFromDA(daElement, 'Dummy.LPHD1.Sim');\n      ancestors.push(daElement);\n\n      element = await fixture(\n        html`<oscd-wizards .host=${document}></oscd-wizards>`\n      );\n      const wizard = createDaInfoWizard(\n        bdaElement,\n        undefined,\n        ancestors,\n        nsdoc\n      );\n      element.workflow.push(() => wizard);\n      await element.requestUpdate();\n    });\n\n    it('looks like the latest snapshot', async () => {\n      await expect(element.wizardUI.dialog).dom.to.equalSnapshot();\n    });\n  });\n\n  describe('with a DA element and DAI Element', () => {\n    beforeEach(async () => {\n      const daElement = validSCL.querySelector(\n        'DataTypeTemplates > DOType[id=\"Dummy.XCBR1.Pos\"] > DA[name=\"ctlModel\"]'\n      )!;\n      const daiElement = validSCL.querySelector(\n        ':root > IED[name=\"IED2\"] > AccessPoint[name=\"P1\"] > Server > ' +\n          'LDevice[inst=\"CircuitBreaker_CB1\"] > LN[lnType=\"Dummy.XCBR1\"] > DOI[name=\"Pos\"]> DAI[name=\"ctlModel\"]'\n      )!;\n      const ancestors = getAncestorsFromDA(daElement, 'Dummy.XCBR1.Pos');\n\n      element = await fixture(\n        html`<oscd-wizards .host=${document}></oscd-wizards>`\n      );\n      const wizard = createDaInfoWizard(\n        daElement,\n        daiElement,\n        ancestors,\n        nsdoc\n      );\n      element.workflow.push(() => wizard);\n      await element.requestUpdate();\n    });\n\n    it('looks like the latest snapshot', async () => {\n      await expect(element.wizardUI.dialog).dom.to.equalSnapshot();\n    });\n  });\n});\n"]}