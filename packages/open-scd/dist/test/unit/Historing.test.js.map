{"version":3,"file":"Historing.test.js","sourceRoot":"","sources":["../../../test/unit/Historing.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { expect, fixture, html } from '@open-wc/testing';\n\nimport './mock-logger.js';\nimport { MockAction } from './mock-actions.js';\nimport { MockLogger } from './mock-logger.js';\n\nimport {\n  CommitEntry,\n  newIssueEvent,\n  newLogEvent,\n} from '../../src/foundation.js';\n\ndescribe('HistoringElement', () => {\n  let element: MockLogger;\n  beforeEach(async () => {\n    element = <MockLogger>await fixture(html`<mock-logger></mock-logger>`);\n  });\n\n  it('starts out with an empty log', () =>\n    expect(element).property('log').to.be.empty);\n\n  it('cannot undo', () => expect(element).property('canUndo').to.be.false);\n  it('cannot redo', () => expect(element).property('canRedo').to.be.false);\n\n  it('cannot undo info messages', () => {\n    element.dispatchEvent(newLogEvent({ kind: 'info', title: 'test info' }));\n    expect(element).property('log').to.have.lengthOf(1);\n    expect(element).property('canUndo').to.be.false;\n  });\n\n  it('cannot undo warning messages', () => {\n    element.dispatchEvent(\n      newLogEvent({ kind: 'warning', title: 'test warning' })\n    );\n    expect(element).property('log').to.have.lengthOf(1);\n    expect(element).property('canUndo').to.be.false;\n  });\n\n  it('cannot undo error messages', () => {\n    element.dispatchEvent(newLogEvent({ kind: 'error', title: 'test error' }));\n    expect(element).property('log').to.have.lengthOf(1);\n    expect(element).property('canUndo').to.be.false;\n  });\n\n  it('has no previous action', () =>\n    expect(element).to.have.property('previousAction', -1));\n  it('has no edit count', () =>\n    expect(element).to.have.property('editCount', -1));\n  it('has no next action', () =>\n    expect(element).to.have.property('nextAction', -1));\n\n  it('renders a placeholder message', () =>\n    expect(element.logUI).to.contain('mwc-list-item[disabled]'));\n  // dirty hack: ask @open-wc/shadowDomDiff for contains support\n\n  it('shows a snackbar on logging an info', () => {\n    expect(element.infoUI).to.have.property('open', false);\n    element.dispatchEvent(newLogEvent({ kind: 'info', title: 'test info' }));\n    expect(element.infoUI).to.have.property('open', true);\n  });\n\n  it('shows a snackbar on logging an warning', () => {\n    expect(element.warningUI).to.have.property('open', false);\n    element.dispatchEvent(\n      newLogEvent({ kind: 'warning', title: 'test warning' })\n    );\n    expect(element.warningUI).to.have.property('open', true);\n  });\n\n  it('shows a snackbar on logging an error', () => {\n    expect(element.errorUI).to.have.property('open', false);\n    element.dispatchEvent(newLogEvent({ kind: 'error', title: 'test error' }));\n    expect(element.errorUI).to.have.property('open', true);\n  });\n\n  it('shows a snackbar on an issue', () => {\n    expect(element.issueUI).to.have.property('open', false);\n    element.dispatchEvent(\n      newIssueEvent({\n        validatorId: 'val',\n        title: 'test issue',\n      })\n    );\n    expect(element.issueUI).to.have.property('open', true);\n  });\n\n  it('opens the log dialog on snackbar \"Show\" button click', async () => {\n    expect(element.logUI).to.have.property('open', false);\n    await element.errorUI.querySelector('mwc-button')!.click();\n    await element.updateComplete;\n    expect(element.logUI).to.have.property('open', true);\n  });\n\n  it('opens the diagnostics dialog on issue snackbar \"Show\" button click', async () => {\n    expect(element.diagnosticUI).to.have.property('open', false);\n    await element.issueUI.querySelector('mwc-button')!.click();\n    await element.updateComplete;\n    expect(element.diagnosticUI).to.have.property('open', true);\n  });\n\n  describe('with an action logged', () => {\n    beforeEach(async () => {\n      element.dispatchEvent(\n        newLogEvent({\n          kind: 'action',\n          title: 'test MockAction',\n          action: MockAction.cre,\n        })\n      );\n      element.requestUpdate();\n      await element.updateComplete;\n      element.requestUpdate();\n      await element.updateComplete;\n    });\n\n    it('can undo', () => expect(element).property('canUndo').to.be.true);\n    it('cannot redo', () => expect(element).property('canRedo').to.be.false);\n\n    it('has no previous action', () =>\n      expect(element).to.have.property('previousAction', -1));\n    it('has an edit count', () =>\n      expect(element).to.have.property('editCount', 0));\n    it('has no next action', () =>\n      expect(element).to.have.property('nextAction', -1));\n\n    it('does not log derived actions', () => {\n      expect(element).property('history').to.have.lengthOf(1);\n      element.dispatchEvent(\n        newLogEvent({\n          kind: 'action',\n          title: 'test MockAction',\n          action: (<CommitEntry>element.history[0]).action,\n        })\n      );\n      expect(element).property('history').to.have.lengthOf(1);\n    });\n\n    it('can reset its log', () => {\n      element.dispatchEvent(newLogEvent({ kind: 'reset' }));\n      expect(element).property('log').to.be.empty;\n      expect(element).property('history').to.be.empty;\n      expect(element).to.have.property('editCount', -1);\n    });\n\n    it('renders a history message for the action', () =>\n      expect(element.historyUI).to.contain.text('test'));\n\n    describe('with a second action logged', () => {\n      beforeEach(() => {\n        element.dispatchEvent(\n          newLogEvent({\n            kind: 'info',\n            title: 'test info',\n          })\n        );\n        element.dispatchEvent(\n          newLogEvent({\n            kind: 'action',\n            title: 'test MockAction',\n            action: MockAction.del,\n          })\n        );\n      });\n\n      it('has a previous action', () =>\n        expect(element).to.have.property('previousAction', 0));\n      it('has an edit count', () =>\n        expect(element).to.have.property('editCount', 1));\n      it('has no next action', () =>\n        expect(element).to.have.property('nextAction', -1));\n\n      describe('with an action undone', () => {\n        beforeEach(() => element.undo());\n\n        it('has no previous action', () =>\n          expect(element).to.have.property('previousAction', -1));\n        it('has an edit count', () =>\n          expect(element).to.have.property('editCount', 0));\n        it('has a next action', () =>\n          expect(element).to.have.property('nextAction', 1));\n\n        it('can redo', () => expect(element).property('canRedo').to.be.true);\n\n        it('removes the undone action when a new action is logged', () => {\n          element.dispatchEvent(\n            newLogEvent({\n              kind: 'action',\n              title: 'test MockAction',\n              action: MockAction.mov,\n            })\n          );\n          expect(element).property('log').to.have.lengthOf(1);\n          expect(element).property('history').to.have.lengthOf(2);\n          expect(element).to.have.property('editCount', 1);\n          expect(element).to.have.property('nextAction', -1);\n        });\n\n        describe('with the second action undone', () => {\n          beforeEach(() => element.undo());\n\n          it('cannot undo any funther', () =>\n            expect(element.undo()).to.be.false);\n        });\n\n        describe('with the action redone', () => {\n          beforeEach(() => element.redo());\n\n          it('has a previous action', () =>\n            expect(element).to.have.property('previousAction', 0));\n          it('has an edit count', () =>\n            expect(element).to.have.property('editCount', 1));\n          it('has no next action', () =>\n            expect(element).to.have.property('nextAction', -1));\n\n          it('cannot redo any further', () =>\n            expect(element.redo()).to.be.false);\n        });\n      });\n    });\n  });\n\n  describe('with an issue incoming', () => {\n    beforeEach(async () => {\n      element.dispatchEvent(\n        newIssueEvent({\n          validatorId: '/src/validators/ValidateSchema.js',\n          title: 'test run 1',\n        })\n      );\n      element.requestUpdate();\n      await element.updateComplete;\n      element.requestUpdate();\n      await element.updateComplete;\n    });\n\n    it('saves the issue to diagnose', () => {\n      expect(element.diagnoses.get('/src/validators/ValidateSchema.js')).to\n        .exist;\n      const issue = element.diagnoses.get(\n        '/src/validators/ValidateSchema.js'\n      )![0];\n      expect(issue.title).to.equal('test run 1');\n    });\n\n    it('does not contain issues from another validator', () =>\n      expect(element.diagnoses.has('/src/validators/ValidateTemplates.js')).to\n        .be.false);\n\n    describe('with another issue coming in - new validator', () => {\n      beforeEach(() => {\n        element.dispatchEvent(\n          newIssueEvent({\n            validatorId: '/src/validators/ValidateTemplates.js',\n            title: 'test run 3',\n          })\n        );\n      });\n\n      it('keeps old issues from the other validator', () => {\n        expect(element.diagnoses.get('/src/validators/ValidateSchema.js')).to\n          .exist;\n        expect(\n          element.diagnoses.get('/src/validators/ValidateSchema.js')!.length\n        ).to.equal(1);\n        const issue = element.diagnoses.get(\n          '/src/validators/ValidateSchema.js'\n        )![0];\n        expect(issue.title).to.equal('test run 1');\n      });\n\n      it('in parallel saves the issues of the new validator', () => {\n        expect(element.diagnoses.get('/src/validators/ValidateTemplates.js')).to\n          .exist;\n        expect(\n          element.diagnoses.get('/src/validators/ValidateTemplates.js')!.length\n        ).to.equal(1);\n        const issue = element.diagnoses.get(\n          '/src/validators/ValidateTemplates.js'\n        )![0];\n        expect(issue.title).to.equal('test run 3');\n      });\n    });\n  });\n});\n"]}