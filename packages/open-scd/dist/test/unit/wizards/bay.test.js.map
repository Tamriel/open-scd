{"version":3,"file":"bay.test.js","sourceRoot":"","sources":["../../../../test/unit/wizards/bay.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { fixture, html, expect } from '@open-wc/testing';\n\nimport {\n  WizardInputElement,\n  isCreate,\n  isReplace,\n  WizardActor,\n  ComplexAction,\n  isSimple\n} from '../../../src/foundation.js';\n\nimport '../../../src/wizard-textfield.js';\nimport { createAction } from '../../../src/wizards/bay.js';\nimport { replaceNamingAttributeWithReferencesAction } from '../../../src/wizards/foundation/actions.js';\n\ndescribe('BayEditor', () => {\n  const noOp = () => {\n    return;\n  };\n  const newWizard = (done = noOp) => {\n    const element = document.createElement('mwc-dialog');\n    element.close = done;\n    return element;\n  };\n\n  let inputs: WizardInputElement[];\n  beforeEach(async () => {\n    inputs = await Promise.all(\n      ['name', 'desc'].map(\n        label =>\n          <Promise<WizardInputElement>>(\n            fixture(html`<wizard-textfield label=${label}></wizard-textfield>`)\n          )\n      )\n    );\n  });\n\n  function getAndValidComplexAction(wizardActor: WizardActor): ComplexAction {\n    const editorActions = wizardActor(inputs, newWizard());\n    expect(editorActions.length).to.equal(1);\n    expect(editorActions[0]).to.not.satisfy(isSimple);\n    return <ComplexAction>editorActions[0];\n  }\n\n  describe('createAction', () => {\n    let parent: Element;\n    beforeEach(() => {\n      parent = new DOMParser().parseFromString(\n        '<Voltage Level></Voltage Level>',\n        'application/xml'\n      ).documentElement;\n    });\n\n    it('returns a WizardAction which returns a Create EditorAction', () => {\n      const wizardAction = createAction(parent);\n      expect(wizardAction(inputs, newWizard())[0]).to.satisfy(isCreate);\n    });\n  });\n\n  describe('updateAction', () => {\n    let element: Element;\n    beforeEach(() => {\n      element = new DOMParser().parseFromString(\n        '<Bay></Bay>',\n        'application/xml'\n      ).documentElement;\n    });\n\n    it('returns a WizardAction which retruns one EditorAction', () => {\n      const wizardAction = replaceNamingAttributeWithReferencesAction(element, 'bay.action.updateBay');\n      const complexAction = getAndValidComplexAction(wizardAction);\n      expect(complexAction.actions.length).to.equal(1);\n    });\n\n    it('returns a WizardAction which returns an Update EditorAction', () => {\n      const wizardAction = replaceNamingAttributeWithReferencesAction(element, 'bay.action.updateBay');\n      const complexAction = getAndValidComplexAction(wizardAction);\n      expect(complexAction.actions[0]).to.satisfy(isReplace);\n    });\n\n    describe('with no change in element Bay', () => {\n      let element: Element;\n      beforeEach(() => {\n        element = new DOMParser().parseFromString(\n          `<Bay name=\"\" desc=\"\">\n              </Bay>`,\n          'application/xml'\n        ).documentElement;\n      });\n\n      it('returns a WizardAction which returns empty EditorAction array', () => {\n        const wizardAction = replaceNamingAttributeWithReferencesAction(element, 'bay.action.updateBay');\n        expect(wizardAction(inputs, newWizard()).length).to.equal(0);\n      });\n    });\n  });\n});\n"]}