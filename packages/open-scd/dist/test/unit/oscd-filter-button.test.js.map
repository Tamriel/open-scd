{"version":3,"file":"oscd-filter-button.test.js","sourceRoot":"","sources":["../../../test/unit/oscd-filter-button.test.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AACzD,OAAO,EAAY,GAAG,EAAE,MAAM,OAAO,CAAC;AAEtC,OAAO,wCAAwC,CAAC;AAChD,OAAO,wCAAwC,CAAC;AAEhD,OAAO,EAAE,OAAO,EAAE,MAAM,0BAA0B,CAAC;AAEnD,OAAO,iCAAiC,CAAC;AAIzC,QAAQ,CAAC,oBAAoB,EAAE,GAAG,EAAE;IAClC,IAAI,OAAqB,CAAC;IAC1B,IAAI,aAA0B,CAAC;IAC/B,MAAM,SAAS,GAAG;QAChB,EAAE,IAAI,EAAE,OAAO,EAAE,eAAe,EAAE,IAAI,EAAE;QACxC,EAAE,IAAI,EAAE,OAAO,EAAE,eAAe,EAAE,KAAK,EAAE;QACzC,EAAE,IAAI,EAAE,OAAO,EAAE,eAAe,EAAE,KAAK,EAAE;QACzC,EAAE,IAAI,EAAE,OAAO,EAAE,eAAe,EAAE,KAAK,EAAE;KAC1C,CAAC;IAEF,IAAI,yBAAmC,CAAC;IAExC,UAAU,CAAC,GAAG,EAAE;QACd,yBAAyB,GAAG,GAAG,EAAE,CAAC;QAClC,MAAM,CAAC,gBAAgB,CACrB,wBAAwB,EACxB,yBAAyB,CAC1B,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,sDAAsD,EAAE,GAAG,EAAE;QACpE,UAAU,CAAC,KAAK,IAAI,EAAE;YACpB,OAAO,GAAG,MAAM,OAAO,CACrB,IAAI,CAAA;;;;;;YAMA,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CACzB,IAAI,CAAC,EAAE,CACL,IAAI,CAAA;yBACO,IAAI,CAAC,IAAI;6BACL,IAAI,CAAC,eAAe;;wBAEzB,IAAI,CAAC,IAAI;qCACI,CAC1B;8BACmB,CACvB,CAAC;YACF,MAAM,OAAO,CAAC,aAAa,EAAE,CAAC;YAC9B,MAAM,OAAO,CAAC,cAAc,CAAC;YAE7B,aAAa,GAAgB,CAC3B,OAAO,CAAC,UAAW,CAAC,aAAa,CAAC,kCAAkC,CAAC,CACtE,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0DAA0D,EAAE,KAAK,IAAI,EAAE;YACxE,MAAM,YAAY,GAAgB,CAChC,OAAO,CAAC,UAAW,CAAC,aAAa,CAAC,iBAAiB,CAAC,CACrD,CAAC;YACF,YAAY,CAAC,KAAK,EAAE,CAAC;YACrB,MAAM,OAAO,CAAC,aAAa,EAAE,CAAC;YAC9B,MAAM,OAAO,CAAC,cAAc,CAAC;YAEf,CACZ,OAAO,CAAC,aAAa,CAAC,oCAAoC,CAAC,CAC3D,CAAC,KAAK,EAAE,CAAC;YACG,CACZ,OAAO,CAAC,aAAa,CAAC,oCAAoC,CAAC,CAC3D,CAAC,KAAK,EAAE,CAAC;YACX,aAAa,CAAC,KAAK,EAAE,CAAC;YAEtB,MAAM,CAAC,yBAAyB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC;YACnD,MAAM,CACJ,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CACjE,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACjB,MAAM,CACJ,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAC7D,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YACvB,MAAM,CACJ,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAC7D,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YACvB,MAAM,CACJ,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAC7D,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YAC9C,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC;QACrD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,sDAAsD,EAAE,GAAG,EAAE;QACpE,UAAU,CAAC,KAAK,IAAI,EAAE;YACpB,OAAO,GAAG,MAAM,OAAO,CACrB,IAAI,CAAA;8BACkB,OAAO,CAAC,QAAQ,CAAC;YACnC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CACzB,IAAI,CAAC,EAAE,CACL,IAAI,CAAA,gCAAgC,IAAI,CAAC,IAAI;wBACnC,IAAI,CAAC,IAAI;qCACI,CAC1B;8BACmB,CACvB,CAAC;YACF,MAAM,OAAO,CAAC,aAAa,EAAE,CAAC;YAC9B,MAAM,OAAO,CAAC,cAAc,CAAC;YAE7B,aAAa,GAAgB,CAC3B,OAAO,CAAC,UAAW,CAAC,aAAa,CAAC,kCAAkC,CAAC,CACtE,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,yDAAyD,EAAE,KAAK,IAAI,EAAE;YACvE,MAAM,YAAY,GAAgB,CAChC,OAAO,CAAC,UAAW,CAAC,aAAa,CAAC,iBAAiB,CAAC,CACrD,CAAC;YACF,YAAY,CAAC,KAAK,EAAE,CAAC;YACrB,MAAM,OAAO,CAAC,aAAa,EAAE,CAAC;YAC9B,MAAM,OAAO,CAAC,cAAc,CAAC;YAEf,CACZ,OAAO,CAAC,aAAa,CAAC,oCAAoC,CAAC,CAC3D,CAAC,KAAK,EAAE,CAAC;YACX,aAAa,CAAC,KAAK,EAAE,CAAC;YAEtB,MAAM,CAAC,yBAAyB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC;YACnD,MAAM,CACJ,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CACjE,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACjB,MAAM,CACJ,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAC7D,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YAC9C,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC;QACrD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,aAAa,EAAE,GAAG,EAAE;QAC3B,UAAU,CAAC,KAAK,IAAI,EAAE;YACpB,OAAO,GAAG,MAAM,OAAO,CACrB,IAAI,CAAA;;;;;;YAMA,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CACzB,IAAI,CAAC,EAAE,CACL,IAAI,CAAA;yBACO,IAAI,CAAC,IAAI;6BACL,IAAI,CAAC,eAAe;;wBAEzB,IAAI,CAAC,IAAI;qCACI,CAC1B;8BACmB,CACvB,CAAC;YACF,MAAM,OAAO,CAAC,aAAa,EAAE,CAAC;YAC9B,MAAM,OAAO,CAAC,cAAc,CAAC;QAC/B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YAC9C,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC;QACrD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import { expect, fixture, html } from '@open-wc/testing';\nimport { SinonSpy, spy } from 'sinon';\n\nimport '@material/mwc-list/mwc-check-list-item';\nimport '@material/mwc-list/mwc-radio-list-item';\n\nimport { getIcon } from '../../src/icons/icons.js';\n\nimport '../../src/oscd-filter-button.js';\n\nimport { FilterButton } from '../../src/oscd-filter-button.js';\n\ndescribe('oscd-filter-button', () => {\n  let element: FilterButton;\n  let primaryButton: HTMLElement;\n  const listItems = [\n    { prim: 'item1', defaultSelected: true },\n    { prim: 'item2', defaultSelected: false },\n    { prim: 'item3', defaultSelected: false },\n    { prim: 'item4', defaultSelected: false },\n  ];\n\n  let selectedItemsChangedEvent: SinonSpy;\n\n  beforeEach(() => {\n    selectedItemsChangedEvent = spy();\n    window.addEventListener(\n      'selected-items-changed',\n      selectedItemsChangedEvent\n    );\n  });\n\n  describe('multi selection with custom header and standard icon', () => {\n    beforeEach(async () => {\n      element = await fixture(\n        html`<oscd-filter-button\n          id=\"filter\"\n          icon=\"developer_board\"\n          header=\"Filter Header\"\n          multi\n        >\n          ${Array.from(listItems).map(\n            item =>\n              html` <mwc-check-list-item\n                value=\"${item.prim}\"\n                ?selected=\"${item.defaultSelected}\"\n              >\n                <span>${item.prim}</span>\n              </mwc-check-list-item>`\n          )}\n        </oscd-filter-button>`\n      );\n      await element.requestUpdate();\n      await element.updateComplete;\n\n      primaryButton = <HTMLElement>(\n        element.shadowRoot!.querySelector('mwc-button[slot=\"primaryAction\"]')\n      );\n    });\n\n    it('when closing dialog then event fired with selected items', async () => {\n      const filterButton = <HTMLElement>(\n        element.shadowRoot!.querySelector('mwc-icon-button')\n      );\n      filterButton.click();\n      await element.requestUpdate();\n      await element.updateComplete;\n\n      (<HTMLElement>(\n        element.querySelector(`mwc-check-list-item[value=\"item2\"]`)\n      )).click();\n      (<HTMLElement>(\n        element.querySelector(`mwc-check-list-item[value=\"item3\"]`)\n      )).click();\n      primaryButton.click();\n\n      expect(selectedItemsChangedEvent).to.be.calledOnce;\n      expect(\n        selectedItemsChangedEvent.args[0][0].detail.selectedItems.length\n      ).to.be.equal(3);\n      expect(\n        selectedItemsChangedEvent.args[0][0].detail.selectedItems[0]\n      ).to.be.equal('item1');\n      expect(\n        selectedItemsChangedEvent.args[0][0].detail.selectedItems[1]\n      ).to.be.equal('item2');\n      expect(\n        selectedItemsChangedEvent.args[0][0].detail.selectedItems[2]\n      ).to.be.equal('item3');\n    });\n\n    it('looks like its latest snapshot', async () => {\n      await expect(element).shadowDom.to.equalSnapshot();\n    });\n  });\n\n  describe('single selection with default header and custom icon', () => {\n    beforeEach(async () => {\n      element = await fixture(\n        html`<oscd-filter-button id=\"filter\">\n          <span slot=\"icon\">${getIcon('lNIcon')}</span>\n          ${Array.from(listItems).map(\n            item =>\n              html` <mwc-radio-list-item value=\"${item.prim}\">\n                <span>${item.prim}</span>\n              </mwc-radio-list-item>`\n          )}\n        </oscd-filter-button>`\n      );\n      await element.requestUpdate();\n      await element.updateComplete;\n\n      primaryButton = <HTMLElement>(\n        element.shadowRoot!.querySelector('mwc-button[slot=\"primaryAction\"]')\n      );\n    });\n\n    it('when closing dialog then event fired with selected item', async () => {\n      const filterButton = <HTMLElement>(\n        element.shadowRoot!.querySelector('mwc-icon-button')\n      );\n      filterButton.click();\n      await element.requestUpdate();\n      await element.updateComplete;\n\n      (<HTMLElement>(\n        element.querySelector(`mwc-radio-list-item[value=\"item2\"]`)\n      )).click();\n      primaryButton.click();\n\n      expect(selectedItemsChangedEvent).to.be.calledOnce;\n      expect(\n        selectedItemsChangedEvent.args[0][0].detail.selectedItems.length\n      ).to.be.equal(1);\n      expect(\n        selectedItemsChangedEvent.args[0][0].detail.selectedItems[0]\n      ).to.be.equal('item2');\n    });\n\n    it('looks like its latest snapshot', async () => {\n      await expect(element).shadowDom.to.equalSnapshot();\n    });\n  });\n\n  describe('is disabled', () => {\n    beforeEach(async () => {\n      element = await fixture(\n        html`<oscd-filter-button\n          id=\"filter\"\n          icon=\"developer_board\"\n          header=\"Filter Header\"\n          disabled=\"true\"\n        >\n          ${Array.from(listItems).map(\n            item =>\n              html` <mwc-check-list-item\n                value=\"${item.prim}\"\n                ?selected=\"${item.defaultSelected}\"\n              >\n                <span>${item.prim}</span>\n              </mwc-check-list-item>`\n          )}\n        </oscd-filter-button>`\n      );\n      await element.requestUpdate();\n      await element.updateComplete;\n    });\n\n    it('looks like its latest snapshot', async () => {\n      await expect(element).shadowDom.to.equalSnapshot();\n    });\n  });\n});\n"]}