{"version":3,"file":"GooseSubscriberMessageBinding.test.js","sourceRoot":"","sources":["../../../../test/integration/editors/GooseSubscriberMessageBinding.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { expect, fixture, html } from '@open-wc/testing';\n\nimport { ListItem } from '@material/mwc-list/mwc-list-item.js';\n\nimport GooseSubscriberMessageBindingPlugin from '../../../src/editors/GooseSubscriberMessageBinding.js';\n\nimport '../../mock-open-scd.js';\nimport { MockOpenSCD } from '../../mock-open-scd.js';\n\nimport { TemplateResult, html as litHTML } from 'lit';\nimport { customElement, query } from 'lit/decorators.js';\n\nimport { SubscriberList } from '../../../src/editors/subscription/goose/subscriber-list.js';\n\ncustomElements.define(\n  'subscription-plugin',\n  GooseSubscriberMessageBindingPlugin\n);\n@customElement('goose-mock-open-scd')\nclass GooseMockOpenSCD extends MockOpenSCD {\n  @query('subscription-plugin')\n  plugin!: GooseSubscriberMessageBindingPlugin;\n\n  renderHosting(): TemplateResult {\n    return litHTML`<subscription-plugin\n      .doc=${this.doc}\n      .editCount=${this.editCount}\n      .nsdoc=${this.nsdoc}\n    ></subscription-plugin>`;\n  }\n}\n\ndescribe('GOOSE subscriber plugin', () => {\n  let element: GooseSubscriberMessageBindingPlugin;\n  let parent: GooseMockOpenSCD;\n  let doc: XMLDocument;\n\n  beforeEach(async () => {\n    doc = await fetch('/test/testfiles/editors/MessageBindingGOOSE2007B4.scd')\n      .then(response => response.text())\n      .then(str => new DOMParser().parseFromString(str, 'application/xml'));\n\n    parent = await fixture(\n      html`<goose-mock-open-scd .doc=${doc}\n      ></goosemock-open-scd>`\n    );\n    await parent.updateComplete;\n    element = parent.plugin;\n  });\n\n  describe('in Publisher view', () => {\n    describe('per default', () => {\n      describe('the plugin itself', () => {\n        it('looks like the latest snapshot', async () => {\n          await expect(element).shadowDom.to.equalSnapshot();\n        });\n      });\n\n      describe('the right hand side GSEControl list', () => {\n        it('looks like the latest snapshot', async () => {\n          await expect(\n            element.shadowRoot?.querySelector('goose-list')\n          ).shadowDom.to.equalSnapshot();\n        });\n      });\n\n      describe('the left hand side subscriber IED list', () => {\n        it('looks like the latest snapshot', async () => {\n          await expect(getSubscriberList()).shadowDom.to.equalSnapshot();\n        });\n      });\n    });\n\n    describe('with a selected GOOSE message', () => {\n      const nthGSEControl = 1;\n      let fCDAs: Element[];\n      let gseControlBlock: Element;\n\n      let goose: HTMLElement;\n\n      beforeEach(async () => {\n        gseControlBlock =\n          doc.querySelectorAll('GSEControl[datSet]')[nthGSEControl];\n        fCDAs = Array.from(\n          gseControlBlock.parentElement?.querySelectorAll(\n            `DataSet[name=\"${gseControlBlock.getAttribute('datSet')}\"] > FCDA`\n          ) ?? []\n        );\n\n        goose = Array.from(\n          element.shadowRoot\n            ?.querySelector('goose-list')\n            ?.shadowRoot?.querySelectorAll('mwc-list-item') ?? []\n        ).filter(item => !item.noninteractive)[nthGSEControl];\n\n        (<HTMLElement>goose).click();\n        await element.updateComplete;\n      });\n\n      describe('the left hand side subscriber IED list', () => {\n        it('looks like the latest snapshot', async () => {\n          await expect(getSubscriberList()).shadowDom.to.equalSnapshot();\n        });\n      });\n\n      describe('for unsubscribed IEDs', () => {\n        it('ExtRefs are not present in the IED', async () => {\n          expect(\n            element.doc.querySelectorAll(\n              'IED[name=\"IED3\"] ExtRef[iedName=\"IED2\"]'\n            ).length\n          ).to.eql(0);\n        });\n\n        describe('after clicking on the IEDs list element', () => {\n          beforeEach(async () => {\n            (<HTMLElement>getItemFromSubscriberList('IED3')).click();\n            await element.updateComplete;\n          });\n\n          describe('the left hand side subscriber IED list', () => {\n            it('looks like the latest snapshot', async () => {\n              await getSubscriberList()!.updateComplete;\n              await parent.updateComplete;\n              await expect(getSubscriberList()).shadowDom.to.equalSnapshot();\n            });\n          });\n\n          it('as many ExtRefs are added to the IED as there are FCDAs', async () => {\n            expect(\n              element.doc.querySelectorAll(\n                'IED[name=\"IED3\"] ExtRef[iedName=\"IED2\"]'\n              ).length\n            ).to.eql(fCDAs.length);\n          });\n\n          it('all Ed1 attributes are added', async () => {\n            fCDAs.forEach(\n              fcda =>\n                expect(\n                  element.doc.querySelector(\n                    `IED[name=\"IED3\"] ExtRef[iedName=\"IED2\"][ldInst=\"${fcda.getAttribute(\n                      'ldInst'\n                    )}\"][prefix=\"${fcda.getAttribute(\n                      'prefix'\n                    )}\"][lnClass=\"${fcda.getAttribute(\n                      'lnClass'\n                    )}\"][lnInst=\"${fcda.getAttribute(\n                      'lnInst'\n                    )}\"][doName=\"${fcda.getAttribute(\n                      'doName'\n                    )}\"][daName=\"${fcda.getAttribute('daName')}\"]`\n                  )\n                ).to.exist\n            );\n          });\n\n          it('all Ed2 attributes are added properly', async () => {\n            fCDAs.forEach(\n              fcda =>\n                expect(\n                  element.doc.querySelector(\n                    `IED[name=\"IED3\"] ExtRef[iedName=\"IED2\"][srcLDInst=\"${fcda\n                      .closest('LDevice')\n                      ?.getAttribute('inst')}\"][srcPrefix=\"${\n                      fcda.closest('LN0')?.getAttribute('prefix') ?? '' //prefix is mendatory in ExtRef!!\n                    }\"][srcLNClass=\"${fcda\n                      .closest('LN0')\n                      ?.getAttribute(\n                        'lnClass'\n                      )}\"][srcCBName=\"${gseControlBlock.getAttribute(\n                      'name'\n                    )}\"][serviceType=\"GOOSE\"]`\n                  )\n                ).to.exist\n            );\n          });\n        });\n      });\n\n      describe('for subscribed IEDs', () => {\n        it('all ExtRefs are available', async () => {\n          expect(\n            element.doc.querySelectorAll(\n              'IED[name=\"IED1\"] ExtRef[iedName=\"IED2\"]'\n            ).length\n          ).to.eql(3);\n        });\n\n        describe('after clicking on the IEDs list element', () => {\n          beforeEach(async () => {\n            (<HTMLElement>getItemFromSubscriberList('IED1')).click();\n            await element.requestUpdate();\n          });\n\n          it('looks like the latest snapshot', async () => {\n            await expect(getSubscriberList()).shadowDom.to.equalSnapshot();\n          });\n\n          it('all ExtRefs are removed from the subscriber IED', async () => {\n            expect(\n              element.doc.querySelectorAll(\n                'IED[name=\"IED1\"] ExtRef[iedName=\"IED2\"]'\n              ).length\n            ).to.eql(0);\n          });\n        });\n      });\n\n      describe('for partially subscribed IEDs', () => {\n        it('some ExtRefs are available in the subscriber IED', async () => {\n          const extRefs = element.doc.querySelectorAll(\n            'IED[name=\"IED4\"] > AccessPoint > Server > LDevice > LN0 > Inputs > ExtRef[iedName=\"IED2\"],' +\n              'IED[name=\"IED4\"] > AccessPoint > Server > LDevice > LN > Inputs > ExtRef[iedName=\"IED2\"]'\n          );\n          expect(extRefs.length).to.eql(2);\n        });\n\n        describe('after clicking on the IEDs list element', () => {\n          beforeEach(async () => {\n            (<HTMLElement>getItemFromSubscriberList('IED4')).click();\n            await element.requestUpdate();\n          });\n\n          it('it looks like the latest snapshot', async () =>\n            await expect(getSubscriberList()).shadowDom.to.equalSnapshot());\n\n          it('adds the required ExtRefs to the subscriber IED', async () =>\n            expect(\n              element.doc.querySelectorAll(\n                'IED[name=\"IED4\"] ExtRef[iedName=\"IED2\"]'\n              ).length\n            ).to.eql(5));\n        });\n      });\n    });\n  });\n\n  describe('in Subscriber view', () => {\n    beforeEach(async () => {\n      (<HTMLElement>(\n        element.shadowRoot?.querySelector('#gooseSubscriberView')\n      )).click();\n      await element.updateComplete;\n    });\n\n    describe('per default', () => {\n      describe('the plugin itsself', () => {\n        it('looks like the latest snapshot', async () => {\n          await expect(element).shadowDom.to.equalSnapshot();\n        });\n      });\n\n      describe('the right hand side IEDs list', () => {\n        it('looks like the latest snapshot', async () => {\n          await expect(\n            element.shadowRoot?.querySelector('ied-list')\n          ).shadowDom.to.equalSnapshot();\n        });\n      });\n\n      describe('the left hand side subscriber IED list', () => {\n        it('looks like the latest snapshot', async () => {\n          await expect(getSubscriberList()).shadowDom.to.equalSnapshot();\n        });\n      });\n    });\n\n    describe('with a selected IED', () => {\n      let ied: HTMLElement;\n\n      beforeEach(async () => {\n        ied = Array.from(\n          element.shadowRoot\n            ?.querySelector('ied-list')\n            ?.shadowRoot?.querySelectorAll('mwc-list-item') ?? []\n        ).filter(item => !item.noninteractive)[1];\n\n        (<HTMLElement>ied).click();\n        await element.updateComplete;\n        await new Promise(resolve => setTimeout(resolve, 100)); // await animation\n      });\n\n      describe('the left hand side subscriber IED list', () => {\n        it('looks like the latest snapshot', async () => {\n          await expect(getSubscriberList()).shadowDom.to.equalSnapshot();\n        });\n      });\n\n      describe('for unsubscribed GSEControl s', () => {\n        it('ExtRefs are not present in the subscriber IED', async () => {\n          expect(\n            element.doc.querySelectorAll(\n              'IED[name=\"IED2\"] ExtRef[iedName=\"IED4\"]'\n            ).length\n          ).to.eql(0);\n        });\n\n        describe('clicking on a GSEControl list item', () => {\n          let fCDAs: Element[];\n          let gseControlBlock: Element;\n\n          beforeEach(async () => {\n            gseControlBlock = doc.querySelector('IED[name=\"IED4\"] GSEControl')!;\n            fCDAs = Array.from(\n              gseControlBlock.parentElement?.querySelectorAll(\n                `DataSet[name=\"${gseControlBlock.getAttribute(\n                  'datSet'\n                )}\"] > FCDA`\n              ) ?? []\n            );\n\n            (<HTMLElement>getItemFromSubscriberList('IED4')).click();\n            await element.requestUpdate();\n          });\n\n          describe('the left hand side subscriber IED list', () => {\n            /*\n            it('looks like the latest snapshot', async () =>\n              await expect(getSubscriberList()).shadowDom.to.equalSnapshot());\n              */\n          });\n\n          it('all ExtRefs are present in the subscriber IED', async () => {\n            expect(\n              element.doc.querySelectorAll(\n                'IED[name=\"IED2\"]  ExtRef[iedName=\"IED4\"]'\n              ).length\n            ).to.eql(fCDAs.length);\n          });\n\n          it('all Ed1 attributes are added', async () => {\n            fCDAs.forEach(\n              fcda =>\n                expect(\n                  element.doc.querySelector(\n                    `IED[name=\"IED2\"] ExtRef[iedName=\"IED4\"][ldInst=\"${fcda.getAttribute(\n                      'ldInst'\n                    )}\"][prefix=\"${fcda.getAttribute(\n                      'prefix'\n                    )}\"][lnClass=\"${fcda.getAttribute(\n                      'lnClass'\n                    )}\"][lnInst=\"${fcda.getAttribute(\n                      'lnInst'\n                    )}\"][doName=\"${fcda.getAttribute(\n                      'doName'\n                    )}\"][daName=\"${fcda.getAttribute('daName')}\"]`\n                  )\n                ).to.exist\n            );\n          });\n\n          it('all Ed2 attributes are added properly', async () => {\n            fCDAs.forEach(\n              fcda =>\n                expect(\n                  element.doc.querySelector(\n                    `IED[name=\"IED2\"] ExtRef[iedName=\"IED4\"][srcLDInst=\"${fcda\n                      .closest('LDevice')\n                      ?.getAttribute('inst')}\"][srcPrefix=\"${\n                      fcda.closest('LN0')?.getAttribute('prefix') ?? '' //prefix is mendatory in ExtRef!!\n                    }\"][srcLNClass=\"${fcda\n                      .closest('LN0')\n                      ?.getAttribute(\n                        'lnClass'\n                      )}\"][srcCBName=\"${gseControlBlock.getAttribute(\n                      'name'\n                    )}\"][serviceType=\"GOOSE\"]`\n                  )\n                ).to.exist\n            );\n          });\n        });\n      });\n\n      describe('for subscribed GSEControl s', () => {\n        beforeEach(async () => {\n          (<HTMLElement>getItemFromSubscriberList('IED4')).click();\n          await element.updateComplete;\n          await parent.updateComplete;\n        });\n\n        it('all ExtRefs are available in the subscriber IED', async () => {\n          expect(\n            element.doc.querySelectorAll(\n              'IED[name=\"IED2\"] ExtRef[iedName=\"IED4\"]'\n            ).length\n          ).to.eql(5);\n        });\n\n        describe('clicking on the GSEControl list item', () => {\n          beforeEach(async () => {\n            (<HTMLElement>getItemFromSubscriberList('IED4')).click();\n            await element.requestUpdate();\n          });\n\n          describe('the left hand side subscriber IED list', () => {\n            it('looks like the latest snapshot', async () =>\n              await expect(getSubscriberList()).shadowDom.to.equalSnapshot());\n          });\n\n          it('ExtRefs to the subscriber IED are removed', async () =>\n            expect(\n              element.doc.querySelectorAll(\n                'IED[name=\"IED2\"] ExtRef[iedName=\"IED4\"]'\n              ).length\n            ).to.eql(0));\n        });\n      });\n\n      describe('for partially subscribed GSEControl s', () => {\n        it('some ExtRefs are available in the subscriber IED', async () => {\n          const extRefs = doc.querySelectorAll(\n            'IED[name=\"IED2\"] ExtRef[iedName=\"IED1\"]'\n          );\n          expect(extRefs.length).to.eql(4);\n        });\n\n        describe('clicking on the GSEControl list item', () => {\n          beforeEach(async () => {\n            (<HTMLElement>getItemFromSubscriberList('IED1')).click();\n            await element.requestUpdate();\n          });\n\n          describe('the left hand side subscriber IED list', () => {\n            /*\n            it('looks like the latest snapshot', async () =>\n              await expect(getSubscriberList()).shadowDom.to.equalSnapshot());\n              */\n          });\n\n          it('the missing ExtRefs are added to the subscriber IED', async () => {\n            expect(\n              element.doc.querySelectorAll(\n                'IED[name=\"IED2\"] ExtRef[iedName=\"IED1\"]'\n              ).length\n            ).to.eql(9);\n          });\n        });\n      });\n    });\n  });\n\n  function getSubscriberList(): SubscriberList | null | undefined {\n    return element.shadowRoot?.querySelector('subscriber-list-goose');\n  }\n\n  function getItemFromSubscriberList(\n    textInListItem: string\n  ): ListItem | undefined {\n    return (\n      Array.from(\n        getSubscriberList()!.shadowRoot?.querySelectorAll('mwc-list-item') ?? []\n      ).filter(listItem => listItem.innerHTML.includes(textInListItem))[0] ??\n      undefined\n    );\n  }\n});\n"]}