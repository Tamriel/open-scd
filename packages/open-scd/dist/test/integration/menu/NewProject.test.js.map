{"version":3,"file":"NewProject.test.js","sourceRoot":"","sources":["../../../../test/integration/menu/NewProject.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { expect, fixture, html } from '@open-wc/testing';\n\nimport '../../mock-open-scd.js';\nimport { MockOpenSCD } from '../../mock-open-scd.js';\n\nimport NewProjectPlugin from '../../../src/menu/NewProject.js';\n\ndescribe('NewProject loader', () => {\n  customElements.define('new-project-plugin', NewProjectPlugin);\n  let parent: MockOpenSCD;\n  let element: NewProjectPlugin;\n\n  beforeEach(async () => {\n    parent = await fixture(html`\n      <mock-open-scd><new-project-plugin></new-project-plugin></mock-open-scd>\n    `);\n\n    element = parent.getActivePlugin();\n  });\n\n  it('creates an empty Edition 2.1 project on wizard primary button click', async () => {\n    element.run();\n    await element.updateComplete;\n    await new Promise(resolve => setTimeout(resolve, 100)); // await animation\n    (<HTMLElement>(\n      parent.wizardUI.shadowRoot!.querySelector(\n        'mwc-button[slot=\"primaryAction\"]'\n      )\n    )).click();\n    expect(parent.doc?.querySelector('Header')).to.exist;\n    expect(parent.doc?.querySelector('Header')?.getAttribute('id')).to.equal(\n      parent.docName.slice(0, -4)\n    );\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('xmlns')).to.equal(\n      'http://www.iec.ch/61850/2003/SCL'\n    );\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('version')).to.equal(\n      '2007'\n    );\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('revision')).to.equal(\n      'B'\n    );\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('release')).to.equal(\n      '4'\n    );\n  });\n\n  it('creates an empty Edition 2 project on wizard primary button click', async () => {\n    element.run();\n    await parent.updateComplete;\n    await new Promise(resolve => setTimeout(resolve, 100)); // await animation\n    (<HTMLElement>(\n      parent.wizardUI.dialog!.querySelector('mwc-radio-list-item:nth-child(2)')\n    )).click();\n    await element.updateComplete;\n\n    (<HTMLElement>(\n      parent.wizardUI.shadowRoot!.querySelector(\n        'mwc-button[slot=\"primaryAction\"]'\n      )\n    )).click();\n\n    expect(parent.doc?.querySelector('Header')).to.exist;\n    expect(parent.doc?.querySelector('Header')?.getAttribute('id')).to.equal(\n      parent.docName.slice(0, -4)\n    );\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('xmlns')).to.equal(\n      'http://www.iec.ch/61850/2003/SCL'\n    );\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('version')).to.equal(\n      '2007'\n    );\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('revision')).to.equal(\n      'B'\n    );\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('release')).to.be\n      .null;\n  });\n\n  it('creates an empty Edition 1 project on wizard primary button click', async () => {\n    element.run();\n    await parent.updateComplete;\n    await new Promise(resolve => setTimeout(resolve, 100)); // await animation\n    (<HTMLElement>(\n      parent.wizardUI.dialog!.querySelector('mwc-radio-list-item:nth-child(1)')\n    )).click();\n    await parent.updateComplete;\n    (<HTMLElement>(\n      parent.wizardUI.shadowRoot!.querySelector(\n        'mwc-button[slot=\"primaryAction\"]'\n      )\n    )).click();\n    expect(parent.doc?.querySelector('Header')).to.exist;\n    expect(parent.doc?.querySelector('Header')?.getAttribute('id')).to.equal(\n      parent.docName.slice(0, -4)\n    );\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('xmlns')).to.equal(\n      'http://www.iec.ch/61850/2003/SCL'\n    );\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('version')).to.be\n      .null;\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('revision')).to.be\n      .null;\n    expect(parent.doc?.querySelector('SCL')?.getAttribute('release')).to.be\n      .null;\n  });\n});\n"]}